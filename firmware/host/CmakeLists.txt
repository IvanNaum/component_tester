cmake_minimum_required(VERSION 3.18)
project(host C CXX)

set(CMAKE_C_STANDARD 99)
set(CMAKE_CXX_STANDARD 11)

add_executable(
    ${PROJECT_NAME}
    ./main.cpp

    ./src/common/logc/log.c
    ./src/tests/catch_test.cpp
)

include_directories(
    ./src/common/logc/
    ./src/common/catch/
)

target_compile_options(${PROJECT_NAME} PRIVATE -Wall -Wextra -Werror)

if(DEBUG_MODE)
    message("Debug mode")
    add_definitions(-DDEBUG_MODE)
endif()

execute_process(COMMAND git describe --dirty --always
    OUTPUT_VARIABLE GIT_HEAD
    OUTPUT_STRIP_TRAILING_WHITESPACE)
add_definitions(-DGIT_HEAD="${GIT_HEAD}")
